@page "/Main" 
@* Since page attr is defined as / AKA root, this page will load first *@
@rendermode InteractiveServer

<PageTitle>Main</PageTitle> @* This sets the title attribute of the page, that is shown in the browser tab*@
<div class="main-layout">
    <!-- LEFT BOX -->
    <div class="box">
		@if (existingData.Length >= 2)
        {
            <h2>
                Here's your recent activity,
                @SaveLoad.DataLoading.Load(Sign_in.loggedUser).User.
            </h2>

            <div class="recent">

                <p>@last3Activities[0]: <br />  @last3Activities[1]</p>

                @if (existingData.Length >= 4)
                {
                <p>@last3Activities[2]: <br />  @last3Activities[3]</p>
                }

                @if (existingData.Length >= 6)
                {
                <p>@last3Activities[4]: <br />  @last3Activities[5]</p>
                }

            </div>
        } else
        {
            <h2>
                Your recent activity will show up here,
                @SaveLoad.DataLoading.Load(Sign_in.loggedUser).User.
            </h2>
        }

    </div>

    <!-- RIGHT BOX -->
    <div class="avgsleep">
        <svg viewBox="0 0 500 500" width="300" height="300">
            <path id="curve" fill="none"
                  d="M73.2,148.6c4-6.1,65.5-96.8,178.6-95.6c111.3,1.2,170.8,90.3,175.1,97" />
            <text text-anchor="middle" font-size="28" fill="white" font-weight="bold">
                <textPath xlink:href="#curve" startOffset="50%">
                    Average Sleep
                </textPath>
            </text>
        </svg>

        <div class="avgsleepcircle">
            <h1>@last3Activities[1]</h1>
        </div>
    </div>
</div>

@code 
{
    string[] existingData = SaveLoad.StorageLoading.Load(Sign_in.loggedUser);

    string[] last3Activities;

    protected override void OnInitialized()
    {
        if (existingData != null && existingData.Length >= 6)
        {
            last3Activities = [existingData[^2], existingData.Last(), existingData[^4], existingData[^3], existingData[^6], existingData[^5]];
        }
        else
        {
            last3Activities = existingData;
        }
	}
}